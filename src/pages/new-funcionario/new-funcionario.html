<ion-header>

    <ion-navbar>
      <ion-title>Cadastro de novo funcionário</ion-title>
    </ion-navbar>
  
    <ion-toolbar no-border-top>
      <ion-segment [(ngModel)]="cadastro">
        <ion-segment-button value="dadosPessoais">
          Dados Pessoais
        </ion-segment-button>
        
        <ion-segment-button value="address">
          Endereço
        </ion-segment-button>
      
  
      <ion-segment-button value="permicoes">
          Permições
        </ion-segment-button>
      </ion-segment>
  
    </ion-toolbar>
  
  </ion-header>
  
  
  <ion-content padding>
    <div [ngSwitch]="cadastro">
        <form [formGroup]="formGroup" (ngSubmit)="insertFuncionario(); $event.preventDefault()">
          <div *ngSwitchCase="'dadosPessoais'">
            <ion-item>
              <ion-label stacked>Nome*</ion-label>
              <ion-input formControlName="nome" type="text"></ion-input>
            </ion-item>
            <p class="danger" *ngIf="formGroup.controls.nome.dirty && formGroup.controls.nome.errors" margin-left>Valor inválido</p>
            <ion-item>
              <ion-label stacked>Email</ion-label>
              <ion-input formControlName="email" type="text"></ion-input>
            </ion-item>
            <p class="danger" *ngIf="formGroup.controls.email.dirty && formGroup.controls.email.errors" margin-left>email inválido</p>    
            <ion-item>
              <ion-label stacked>CPF*</ion-label>
              <ion-input formControlName="cpfOuCnpj" type="text"></ion-input>
            </ion-item> 
            <ion-item>
              <ion-label stacked>Celular*</ion-label>
              <ion-input formControlName="celular" type="text"></ion-input>
            </ion-item>
            <p class="danger" *ngIf="formGroup.controls.celular.dirty && formGroup.controls.celular.errors" margin-left>numero inválido</p>
            <ion-item>
              <ion-label stacked>Telefone</ion-label>
              <ion-input formControlName="telefone" type="text"></ion-input>
            </ion-item> 
          </div>
          
          <div *ngSwitchCase="'address'">
            <ion-item>
              <ion-label stacked>Logradouro</ion-label>
              <ion-input formControlName="logradouro" type="text"></ion-input>
            </ion-item>        
            <ion-item>
              <ion-label stacked>Número</ion-label>
              <ion-input formControlName="numero" type="text"></ion-input>
            </ion-item>        
            <ion-item>
              <ion-label stacked>Complemento</ion-label>
              <ion-input formControlName="complemento" type="text"></ion-input>
            </ion-item>
            <ion-item>
              <ion-label stacked>Bairro</ion-label>
              <ion-input formControlName="bairro" type="text"></ion-input>
            </ion-item>
            <ion-item>
              <ion-label stacked>CEP</ion-label>
              <ion-input formControlName="cep" type="text"></ion-input>
            </ion-item>
  
            <ion-item>
                <ion-label stacked>Cidade</ion-label>
                <select-searchable
                  
                  formControlName="cidade"
                  item-content
                  [items]="cidades"
                  searchPlaceholder="digite o nome da cidade"
                  itemValueField="id"
                  itemTextField="nome"
                  [canSearch]="true"                
                >
              </select-searchable>
            </ion-item> 
  
            
            <ion-item [hidden]="true">            
              <ion-input formControlName="estadoId" type="text" [disabled]="true" [hidden]="true"></ion-input>
            </ion-item>
  
          </div>
  
          <div *ngSwitchCase="'permicoes'">
  
              <ion-card>
  
                  <ion-card-header>
                    Filiais
                  </ion-card-header>
                
                  <ion-card-content>
                      <ion-item>
                          <select-searchable
                            item-content
                            formControlName="filiais"
                            [isMultiple]="true"
                            [items]="filiais"
                            itemValueField="id"
                            itemTextField="nome"
                            cancelButtonText="Cancelar"
                            closeButtonText="Cancelar"
                            clearButtonText="Limpar seleção"                          
                            [canClear]="true"
                          >
                          </select-searchable>
                            
                        </ion-item>
                  
                  </ion-card-content>
                
                </ion-card>
  
                <ion-card>
  
                    <ion-card-header>
                      Funções
                    </ion-card-header>
                  
                    <ion-card-content>
                        <ion-item>
                          <select-searchable
                            item-content
                            formControlName="perfis"
                            [isMultiple]="true"
                            [items]="perfis"
                            itemValueField="id"
                            itemTextField="descricao"
                            cancelButtonText="Cancelar"
                            closeButtonText="Cancelar"
                            clearButtonText="Limpar seleção"
                            [shouldStoreItemValue]="true"
                            [canClear]="true"
                          >
                          </select-searchable>
                            
                        </ion-item>
                    </ion-card-content>
                  
                  </ion-card>
  
                  
              
          </div>
            <button ion-button block type="submit" [disabled]="formGroup.invalid">salvar</button>
          </form>
    </div>
            
  
          
       
  </ion-content> 
  